<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Question</title>
  <link rel="icon" href="assets/favicon.png" />
  <script defer src="https://cloud.umami.is/script.js" data-website-id="873b2a6e-8d24-4ef6-ac32-7a22c1691f69"></script>
  <link rel="stylesheet" href="css/question.css" />
  <link rel="stylesheet" href="css/game.css" />
  <style>
    .explanation-container {
      padding: 20px;
      margin-top: 10px;
      background-color: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .explanation-text {
      font-size: 16px;
      color: #333;
    }

    .retry-button {
      font-size: 16px;
      padding: 10px 20px;
      margin-top: 10px;
      margin-bottom: 16px;
      cursor: pointer;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .retry-button:hover {
      background-color: #0056b3;
    }
  </style>
</head>

<body>
  <div class="container">
    <div id="game" class="justify-center flex-column">
      <div id="hud">
        <div class="hud-item">
          <p id="progressText" class="hud-prefix">Question</p>
          <div id="progressBar">
            <div id="progressBarFull"></div>
          </div>
        </div>
        <div class="hud-item">
          <p class="hud-prefix">Score</p>
          <h1 class="hud-main-text" id="score">0</h1>
        </div>
      </div>
      <h1 id="question">What is the answer to this question?</h1>
      <div class="choice-container">
        <p class="choice-prefix">A</p>
        <p class="choice-text" data-number="1">Choice 1</p>
      </div>
      <div class="choice-container">
        <p class="choice-prefix">B</p>
        <p class="choice-text" data-number="2">Choice 2</p>
      </div>
      <div class="choice-container">
        <p class="choice-prefix">C</p>
        <p class="choice-text" data-number="3">Choice 3</p>
      </div>
      <div class="choice-container">
        <p class="choice-prefix">D</p>
        <p class="choice-text" data-number="4">Choice 4</p>
      </div>
      <div id="explanation" class="hidden explanation-container">
        <p id="explanationText" class="explanation-text"></p>
        <button id="retryButton" class="retry-button" onclick="retryQuestion()">Try Again</button>
      </div>
    </div>
  </div>

  <script>
    const question = document.querySelector("#question");
    const choices = Array.from(document.querySelectorAll(".choice-text"));
    const progressText = document.querySelector("#progressText");
    const scoreText = document.querySelector("#score");
    const progressBarFull = document.querySelector("#progressBarFull");
    const explanationElement = document.querySelector("#explanation");
    const explanationText = document.querySelector("#explanationText");
    const retryButton = document.querySelector("#retryButton");

    let currentQuestion = {};
    let acceptingAnswers = true;
    let score = 0;
    let questionCounter = 0;
    let availableQuestions = [];
    let retries = 0;
    let retryScore = 200;
   let questions = [
  {
    question: "A viral post claims that charging your phone in the microwave will make it charge instantly. What should you do?",
    choice1: "Ignore it and look it up on a trusted tech site first.",
    choice2: "Try it yourself to see if it works.",
    choice3: "Share the post so others can try it too.",
    choice4: "Ask your friends if they've done it.",
    answer: 1,
    explanation: "This is a dangerous hoax. Always fact-check bizarre claims using trusted sources before acting on them."
  },
  {
    question: "You see a post saying your favorite celebrity passed away, but no major news sources are reporting it. What should you do?",
    choice1: "Believe it right away and tell everyone.",
    choice2: "Make a tribute post immediately.",
    choice3: "Comment asking others if it's true.",
    choice4: "Double-check reliable news sources before believing it.",
    answer: 4,
    explanation: "Some posts are clickbait or fake. Always verify news with trusted sources before sharing or reacting."
  },
  {
    question: "A chain message says if you don't forward it to 10 people, your account will be deleted. What's the smartest thing to do?",
    choice1: "Forward it just in case.",
    choice2: "Delete it — it's clearly fake.",
    choice3: "Ask a friend what to do.",
    choice4: "Post about it on your story to warn others.",
    answer: 2,
    explanation: "Chain messages are usually hoaxes designed to scare people. Never forward them — just delete and ignore."
  }
];

    const SCORE_POINTS = 200;
    const MAX_QUESTIONS = questions.length;

    startGame = () => {
      questionCounter = 0;
      score = 0;
      availableQuestions = [...questions];
      getNewQuestion();
    };

    getNewQuestion = () => {
      retries = 0;
      retryScore = SCORE_POINTS;
      explanationElement.classList.add("hidden");

      if (questionCounter >= MAX_QUESTIONS) {
        localStorage.setItem("mostRecentScore", score);
        return window.location.assign("save_game.html");
      }

      questionCounter++;
      progressText.innerText = `Question ${questionCounter} of ${MAX_QUESTIONS}`;
      progressBarFull.style.width = `${(questionCounter / MAX_QUESTIONS) * 100}%`;

      currentQuestion = availableQuestions[questionCounter - 1];
      question.innerText = currentQuestion.question;

      choices.forEach((choice) => {
        const number = choice.dataset["number"];
        choice.innerText = currentQuestion["choice" + number];
        choice.parentElement.classList.remove("correct", "incorrect");
      });

      acceptingAnswers = true;
    };

    choices.forEach((choice) => {
      choice.addEventListener("click", (e) => {
        if (!acceptingAnswers) return;

        acceptingAnswers = false;
        const selectedChoice = e.target;
        const selectedAnswer = selectedChoice.dataset["number"];
        let classToApply = selectedAnswer == currentQuestion.answer ? "correct" : "incorrect";

        selectedChoice.parentElement.classList.add(classToApply);

        if (classToApply === "correct") {
          incrementScore(retryScore);
          setTimeout(() => {
            getNewQuestion();
          }, 1000);
        } else {
          retryScore -= 100;
          if (retryScore < 0) retryScore = 0;

          explanationText.innerText = currentQuestion.explanation;
          explanationElement.classList.remove("hidden");
          retries++;

          if (retries < 3) {
            acceptingAnswers = true;
          } else {
            setTimeout(() => {
              getNewQuestion();
            }, 1000);
          }
        }
      });
    });

    retryQuestion = () => {
      if (retries >= 3) {
        return;
      }

      const selectedChoice = document.querySelector(".incorrect");
      if (selectedChoice) {
        selectedChoice.classList.remove("incorrect");
      }

      explanationElement.classList.add("hidden");
      acceptingAnswers = true;
    };

    incrementScore = (num) => {
      score += num;
      scoreText.innerText = score;
    };

    startGame();
  </script>
</body>


</html>
